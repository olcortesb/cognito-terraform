Name: TerraformDeploy
SchemaVersion: "1.0"

Triggers:
  - Type: PUSH
    Branches:
      - main

Actions:
  TerraformPlan:
    Identifier: aws/build@v1
    Inputs:
      Sources:
        - WorkflowSource
    Configuration:
      Steps:
        - Run: terraform init
        - Run: terraform validate
        - Run: terraform plan -var="user_pool_name=codecatalyst-cognito-pool"
    Compute:
      Type: Lambda